"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/earnings/route";
exports.ids = ["app/api/earnings/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fearnings%2Froute&page=%2Fapi%2Fearnings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fearnings%2Froute.ts&appDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fearnings%2Froute&page=%2Fapi%2Fearnings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fearnings%2Froute.ts&appDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mayerlyzapaatrodriguez_Documents_Olas_joyeria_src_app_api_earnings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/earnings/route.ts */ \"(rsc)/./src/app/api/earnings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/earnings/route\",\n        pathname: \"/api/earnings\",\n        filename: \"route\",\n        bundlePath: \"app/api/earnings/route\"\n    },\n    resolvedPagePath: \"/Users/mayerlyzapaatrodriguez/Documents/Olas-joyeria/src/app/api/earnings/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mayerlyzapaatrodriguez_Documents_Olas_joyeria_src_app_api_earnings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/earnings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZlYXJuaW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZWFybmluZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZlYXJuaW5ncyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1heWVybHl6YXBhYXRyb2RyaWd1ZXolMkZEb2N1bWVudHMlMkZPbGFzLWpveWVyaWElMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWF5ZXJseXphcGFhdHJvZHJpZ3VleiUyRkRvY3VtZW50cyUyRk9sYXMtam95ZXJpYSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8/YTY5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWF5ZXJseXphcGFhdHJvZHJpZ3Vlei9Eb2N1bWVudHMvT2xhcy1qb3llcmlhL3NyYy9hcHAvYXBpL2Vhcm5pbmdzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9lYXJuaW5ncy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Vhcm5pbmdzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9lYXJuaW5ncy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9tYXllcmx5emFwYWF0cm9kcmlndWV6L0RvY3VtZW50cy9PbGFzLWpveWVyaWEvc3JjL2FwcC9hcGkvZWFybmluZ3Mvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2Vhcm5pbmdzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fearnings%2Froute&page=%2Fapi%2Fearnings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fearnings%2Froute.ts&appDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/earnings/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/earnings/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n\n\nasync function GET(req) {\n    try {\n        const searchParams = req.nextUrl.searchParams;\n        const period = searchParams.get(\"period\") || \"all\"; // all, month, week, day\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        const db = client.db();\n        const ordersCollection = db.collection(\"orders\");\n        let dateFilter = {};\n        if (period === \"day\") {\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            dateFilter = {\n                createdAt: {\n                    $gte: today\n                }\n            };\n        } else if (period === \"week\") {\n            const weekAgo = new Date();\n            weekAgo.setDate(weekAgo.getDate() - 7);\n            dateFilter = {\n                createdAt: {\n                    $gte: weekAgo\n                }\n            };\n        } else if (period === \"month\") {\n            const monthAgo = new Date();\n            monthAgo.setMonth(monthAgo.getMonth() - 1);\n            dateFilter = {\n                createdAt: {\n                    $gte: monthAgo\n                }\n            };\n        }\n        // Total earnings\n        const totalEarningsResult = await ordersCollection.aggregate([\n            {\n                $match: {\n                    ...dateFilter,\n                    status: {\n                        $in: [\n                            \"completed\",\n                            \"completed\"\n                        ]\n                    }\n                }\n            },\n            {\n                $group: {\n                    _id: null,\n                    total: {\n                        $sum: \"$total\"\n                    }\n                }\n            }\n        ]).toArray();\n        const totalEarnings = totalEarningsResult[0]?.total || 0;\n        // Total orders\n        const totalOrders = await ordersCollection.countDocuments({\n            ...dateFilter\n        });\n        // Earnings by product\n        const earningsByProduct = await ordersCollection.aggregate([\n            {\n                $match: {\n                    ...dateFilter,\n                    status: \"completed\"\n                }\n            },\n            {\n                $unwind: \"$items\"\n            },\n            {\n                $group: {\n                    _id: \"$items.productId\",\n                    productName: {\n                        $first: \"$items.productName\"\n                    },\n                    totalSales: {\n                        $sum: {\n                            $multiply: [\n                                \"$items.quantity\",\n                                \"$items.price\"\n                            ]\n                        }\n                    },\n                    quantity: {\n                        $sum: \"$items.quantity\"\n                    }\n                }\n            },\n            {\n                $sort: {\n                    totalSales: -1\n                }\n            }\n        ]).toArray();\n        // Daily earnings (last 30 days)\n        const dailyEarnings = await ordersCollection.aggregate([\n            {\n                $match: {\n                    createdAt: {\n                        $gte: new Date(new Date().setDate(new Date().getDate() - 30))\n                    },\n                    status: \"completed\"\n                }\n            },\n            {\n                $group: {\n                    _id: {\n                        $dateToString: {\n                            format: \"%Y-%m-%d\",\n                            date: \"$createdAt\"\n                        }\n                    },\n                    total: {\n                        $sum: \"$total\"\n                    }\n                }\n            },\n            {\n                $sort: {\n                    _id: 1\n                }\n            }\n        ]).toArray();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            totalEarnings,\n            totalOrders,\n            earningsByProduct,\n            dailyEarnings\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Error fetching earnings:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Error fetching earnings\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9lYXJuaW5ncy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFDZDtBQUVuQyxlQUFlRSxJQUFJQyxHQUFnQjtJQUN4QyxJQUFJO1FBQ0YsTUFBTUMsZUFBZUQsSUFBSUUsT0FBTyxDQUFDRCxZQUFZO1FBQzdDLE1BQU1FLFNBQVNGLGFBQWFHLEdBQUcsQ0FBQyxhQUFhLE9BQU8sd0JBQXdCO1FBRTVFLE1BQU1DLFNBQVMsTUFBTVAsb0RBQWFBO1FBQ2xDLE1BQU1RLEtBQUtELE9BQU9DLEVBQUU7UUFDcEIsTUFBTUMsbUJBQW1CRCxHQUFHRSxVQUFVLENBQUM7UUFFdkMsSUFBSUMsYUFBYSxDQUFDO1FBRWxCLElBQUlOLFdBQVcsT0FBTztZQUNwQixNQUFNTyxRQUFRLElBQUlDO1lBQ2xCRCxNQUFNRSxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7WUFDeEJILGFBQWE7Z0JBQUVJLFdBQVc7b0JBQUVDLE1BQU1KO2dCQUFNO1lBQUU7UUFDNUMsT0FBTyxJQUFJUCxXQUFXLFFBQVE7WUFDNUIsTUFBTVksVUFBVSxJQUFJSjtZQUNwQkksUUFBUUMsT0FBTyxDQUFDRCxRQUFRRSxPQUFPLEtBQUs7WUFDcENSLGFBQWE7Z0JBQUVJLFdBQVc7b0JBQUVDLE1BQU1DO2dCQUFRO1lBQUU7UUFDOUMsT0FBTyxJQUFJWixXQUFXLFNBQVM7WUFDN0IsTUFBTWUsV0FBVyxJQUFJUDtZQUNyQk8sU0FBU0MsUUFBUSxDQUFDRCxTQUFTRSxRQUFRLEtBQUs7WUFDeENYLGFBQWE7Z0JBQUVJLFdBQVc7b0JBQUVDLE1BQU1JO2dCQUFTO1lBQUU7UUFDL0M7UUFFQSxpQkFBaUI7UUFDakIsTUFBTUcsc0JBQXNCLE1BQU1kLGlCQUMvQmUsU0FBUyxDQUFDO1lBQ1Q7Z0JBQUVDLFFBQVE7b0JBQUUsR0FBR2QsVUFBVTtvQkFBRWUsUUFBUTt3QkFBRUMsS0FBSzs0QkFBQzs0QkFBYTt5QkFBWTtvQkFBQztnQkFBRTtZQUFFO1lBQ3pFO2dCQUFFQyxRQUFRO29CQUFFQyxLQUFLO29CQUFNQyxPQUFPO3dCQUFFQyxNQUFNO29CQUFTO2dCQUFFO1lBQUU7U0FDcEQsRUFDQUMsT0FBTztRQUVWLE1BQU1DLGdCQUFnQlYsbUJBQW1CLENBQUMsRUFBRSxFQUFFTyxTQUFTO1FBRXZELGVBQWU7UUFDZixNQUFNSSxjQUFjLE1BQU16QixpQkFBaUIwQixjQUFjLENBQUM7WUFDeEQsR0FBR3hCLFVBQVU7UUFDZjtRQUVBLHNCQUFzQjtRQUN0QixNQUFNeUIsb0JBQW9CLE1BQU0zQixpQkFDN0JlLFNBQVMsQ0FBQztZQUNUO2dCQUFFQyxRQUFRO29CQUFFLEdBQUdkLFVBQVU7b0JBQUVlLFFBQVE7Z0JBQVk7WUFBRTtZQUNqRDtnQkFBRVcsU0FBUztZQUFTO1lBQ3BCO2dCQUNFVCxRQUFRO29CQUNOQyxLQUFLO29CQUNMUyxhQUFhO3dCQUFFQyxRQUFRO29CQUFxQjtvQkFDNUNDLFlBQVk7d0JBQUVULE1BQU07NEJBQUVVLFdBQVc7Z0NBQUM7Z0NBQW1COzZCQUFlO3dCQUFDO29CQUFFO29CQUN2RUMsVUFBVTt3QkFBRVgsTUFBTTtvQkFBa0I7Z0JBQ3RDO1lBQ0Y7WUFDQTtnQkFBRVksT0FBTztvQkFBRUgsWUFBWSxDQUFDO2dCQUFFO1lBQUU7U0FDN0IsRUFDQVIsT0FBTztRQUVWLGdDQUFnQztRQUNoQyxNQUFNWSxnQkFBZ0IsTUFBTW5DLGlCQUN6QmUsU0FBUyxDQUFDO1lBQ1Q7Z0JBQ0VDLFFBQVE7b0JBQ05WLFdBQVc7d0JBQ1RDLE1BQU0sSUFBSUgsS0FBSyxJQUFJQSxPQUFPSyxPQUFPLENBQUMsSUFBSUwsT0FBT00sT0FBTyxLQUFLO29CQUMzRDtvQkFDQU8sUUFBUTtnQkFDVjtZQUNGO1lBQ0E7Z0JBQ0VFLFFBQVE7b0JBQ05DLEtBQUs7d0JBQ0hnQixlQUFlOzRCQUFFQyxRQUFROzRCQUFZQyxNQUFNO3dCQUFhO29CQUMxRDtvQkFDQWpCLE9BQU87d0JBQUVDLE1BQU07b0JBQVM7Z0JBQzFCO1lBQ0Y7WUFDQTtnQkFBRVksT0FBTztvQkFBRWQsS0FBSztnQkFBRTtZQUFFO1NBQ3JCLEVBQ0FHLE9BQU87UUFFVixPQUFPakMscURBQVlBLENBQUNpRCxJQUFJLENBQ3RCO1lBQ0VmO1lBQ0FDO1lBQ0FFO1lBQ0FRO1FBQ0YsR0FDQTtZQUFFbEIsUUFBUTtRQUFJO0lBRWxCLEVBQUUsT0FBT3VCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBT2xELHFEQUFZQSxDQUFDaUQsSUFBSSxDQUN0QjtZQUFFRyxTQUFTO1FBQTBCLEdBQ3JDO1lBQUV6QixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpdGVfcmVhY3Rfc2hhZGNuX3RzLy4vc3JjL2FwcC9hcGkvZWFybmluZ3Mvcm91dGUudHM/N2NkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tIFwiQC9saWIvbW9uZ29kYlwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXEubmV4dFVybC5zZWFyY2hQYXJhbXM7XG4gICAgY29uc3QgcGVyaW9kID0gc2VhcmNoUGFyYW1zLmdldChcInBlcmlvZFwiKSB8fCBcImFsbFwiOyAvLyBhbGwsIG1vbnRoLCB3ZWVrLCBkYXlcblxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XG4gICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAgICBjb25zdCBvcmRlcnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcIm9yZGVyc1wiKTtcblxuICAgIGxldCBkYXRlRmlsdGVyID0ge307XG5cbiAgICBpZiAocGVyaW9kID09PSBcImRheVwiKSB7XG4gICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIGRhdGVGaWx0ZXIgPSB7IGNyZWF0ZWRBdDogeyAkZ3RlOiB0b2RheSB9IH07XG4gICAgfSBlbHNlIGlmIChwZXJpb2QgPT09IFwid2Vla1wiKSB7XG4gICAgICBjb25zdCB3ZWVrQWdvID0gbmV3IERhdGUoKTtcbiAgICAgIHdlZWtBZ28uc2V0RGF0ZSh3ZWVrQWdvLmdldERhdGUoKSAtIDcpO1xuICAgICAgZGF0ZUZpbHRlciA9IHsgY3JlYXRlZEF0OiB7ICRndGU6IHdlZWtBZ28gfSB9O1xuICAgIH0gZWxzZSBpZiAocGVyaW9kID09PSBcIm1vbnRoXCIpIHtcbiAgICAgIGNvbnN0IG1vbnRoQWdvID0gbmV3IERhdGUoKTtcbiAgICAgIG1vbnRoQWdvLnNldE1vbnRoKG1vbnRoQWdvLmdldE1vbnRoKCkgLSAxKTtcbiAgICAgIGRhdGVGaWx0ZXIgPSB7IGNyZWF0ZWRBdDogeyAkZ3RlOiBtb250aEFnbyB9IH07XG4gICAgfVxuXG4gICAgLy8gVG90YWwgZWFybmluZ3NcbiAgICBjb25zdCB0b3RhbEVhcm5pbmdzUmVzdWx0ID0gYXdhaXQgb3JkZXJzQ29sbGVjdGlvblxuICAgICAgLmFnZ3JlZ2F0ZShbXG4gICAgICAgIHsgJG1hdGNoOiB7IC4uLmRhdGVGaWx0ZXIsIHN0YXR1czogeyAkaW46IFtcImNvbXBsZXRlZFwiLCBcImNvbXBsZXRlZFwiXSB9IH0gfSxcbiAgICAgICAgeyAkZ3JvdXA6IHsgX2lkOiBudWxsLCB0b3RhbDogeyAkc3VtOiBcIiR0b3RhbFwiIH0gfSB9LFxuICAgICAgXSlcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICBjb25zdCB0b3RhbEVhcm5pbmdzID0gdG90YWxFYXJuaW5nc1Jlc3VsdFswXT8udG90YWwgfHwgMDtcblxuICAgIC8vIFRvdGFsIG9yZGVyc1xuICAgIGNvbnN0IHRvdGFsT3JkZXJzID0gYXdhaXQgb3JkZXJzQ29sbGVjdGlvbi5jb3VudERvY3VtZW50cyh7XG4gICAgICAuLi5kYXRlRmlsdGVyLFxuICAgIH0pO1xuXG4gICAgLy8gRWFybmluZ3MgYnkgcHJvZHVjdFxuICAgIGNvbnN0IGVhcm5pbmdzQnlQcm9kdWN0ID0gYXdhaXQgb3JkZXJzQ29sbGVjdGlvblxuICAgICAgLmFnZ3JlZ2F0ZShbXG4gICAgICAgIHsgJG1hdGNoOiB7IC4uLmRhdGVGaWx0ZXIsIHN0YXR1czogXCJjb21wbGV0ZWRcIiB9IH0sXG4gICAgICAgIHsgJHVud2luZDogXCIkaXRlbXNcIiB9LFxuICAgICAgICB7XG4gICAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgICBfaWQ6IFwiJGl0ZW1zLnByb2R1Y3RJZFwiLFxuICAgICAgICAgICAgcHJvZHVjdE5hbWU6IHsgJGZpcnN0OiBcIiRpdGVtcy5wcm9kdWN0TmFtZVwiIH0sXG4gICAgICAgICAgICB0b3RhbFNhbGVzOiB7ICRzdW06IHsgJG11bHRpcGx5OiBbXCIkaXRlbXMucXVhbnRpdHlcIiwgXCIkaXRlbXMucHJpY2VcIl0gfSB9LFxuICAgICAgICAgICAgcXVhbnRpdHk6IHsgJHN1bTogXCIkaXRlbXMucXVhbnRpdHlcIiB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHsgJHNvcnQ6IHsgdG90YWxTYWxlczogLTEgfSB9LFxuICAgICAgXSlcbiAgICAgIC50b0FycmF5KCk7XG5cbiAgICAvLyBEYWlseSBlYXJuaW5ncyAobGFzdCAzMCBkYXlzKVxuICAgIGNvbnN0IGRhaWx5RWFybmluZ3MgPSBhd2FpdCBvcmRlcnNDb2xsZWN0aW9uXG4gICAgICAuYWdncmVnYXRlKFtcbiAgICAgICAge1xuICAgICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgICAgICRndGU6IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0RGF0ZShuZXcgRGF0ZSgpLmdldERhdGUoKSAtIDMwKSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhdHVzOiBcImNvbXBsZXRlZFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICAkZGF0ZVRvU3RyaW5nOiB7IGZvcm1hdDogXCIlWS0lbS0lZFwiLCBkYXRlOiBcIiRjcmVhdGVkQXRcIiB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvdGFsOiB7ICRzdW06IFwiJHRvdGFsXCIgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7ICRzb3J0OiB7IF9pZDogMSB9IH0sXG4gICAgICBdKVxuICAgICAgLnRvQXJyYXkoKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgdG90YWxFYXJuaW5ncyxcbiAgICAgICAgdG90YWxPcmRlcnMsXG4gICAgICAgIGVhcm5pbmdzQnlQcm9kdWN0LFxuICAgICAgICBkYWlseUVhcm5pbmdzLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVhcm5pbmdzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBtZXNzYWdlOiBcIkVycm9yIGZldGNoaW5nIGVhcm5pbmdzXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjbGllbnRQcm9taXNlIiwiR0VUIiwicmVxIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBlcmlvZCIsImdldCIsImNsaWVudCIsImRiIiwib3JkZXJzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJkYXRlRmlsdGVyIiwidG9kYXkiLCJEYXRlIiwic2V0SG91cnMiLCJjcmVhdGVkQXQiLCIkZ3RlIiwid2Vla0FnbyIsInNldERhdGUiLCJnZXREYXRlIiwibW9udGhBZ28iLCJzZXRNb250aCIsImdldE1vbnRoIiwidG90YWxFYXJuaW5nc1Jlc3VsdCIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsInN0YXR1cyIsIiRpbiIsIiRncm91cCIsIl9pZCIsInRvdGFsIiwiJHN1bSIsInRvQXJyYXkiLCJ0b3RhbEVhcm5pbmdzIiwidG90YWxPcmRlcnMiLCJjb3VudERvY3VtZW50cyIsImVhcm5pbmdzQnlQcm9kdWN0IiwiJHVud2luZCIsInByb2R1Y3ROYW1lIiwiJGZpcnN0IiwidG90YWxTYWxlcyIsIiRtdWx0aXBseSIsInF1YW50aXR5IiwiJHNvcnQiLCJkYWlseUVhcm5pbmdzIiwiJGRhdGVUb1N0cmluZyIsImZvcm1hdCIsImRhdGUiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/earnings/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n// src/lib/mongodb.ts\n\nif (!process.env.MONGODB_URI) {\n    throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    let globalWithMongo = global;\n    if (!globalWithMongo._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        globalWithMongo._mongoClientPromise = client.connect();\n    }\n    if (!globalWithMongo._mongoClientPromise) {\n        throw new Error(\"Could not connect to MongoDB\");\n    }\n    clientPromise = globalWithMongo._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEscUJBQXFCO0FBQ2lCO0FBRXRDLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLEVBQUU7SUFDNUIsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMsTUFBTUosUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1HLFVBQVUsQ0FBQztBQUVqQixJQUFJQztBQUNKLElBQUlDO0FBRUosSUFBSVAsSUFBc0MsRUFBRTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUlRLGtCQUFrQkM7SUFJdEIsSUFBSSxDQUFDRCxnQkFBZ0JFLG1CQUFtQixFQUFFO1FBQ3hDSixTQUFTLElBQUlQLGdEQUFXQSxDQUFDSyxLQUFLQztRQUM5QkcsZ0JBQWdCRSxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztJQUN0RDtJQUNBLElBQUksQ0FBQ0gsZ0JBQWdCRSxtQkFBbUIsRUFBRTtRQUN4QyxNQUFNLElBQUlQLE1BQU07SUFDbEI7SUFDQUksZ0JBQWdCQyxnQkFBZ0JFLG1CQUFtQjtBQUNyRCxPQUFPLEVBSU47QUFFRCxpRUFBaUU7QUFDakUsOERBQThEO0FBQzlELGlFQUFlSCxhQUFhQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9zcmMvbGliL21vbmdvZGIudHM/NTNjMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL21vbmdvZGIudHNcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQvTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZTogXCJNT05HT0RCX1VSSVwiJyk7XG59XG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG5sZXQgY2xpZW50O1xubGV0IGNsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+O1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgLy8gaXMgcHJlc2VydmVkIGFjcm9zcyBtb2R1bGUgcmVsb2FkcyBjYXVzZWQgYnkgSE1SIChIb3QgTW9kdWxlIFJlcGxhY2VtZW50KS5cbiAgbGV0IGdsb2JhbFdpdGhNb25nbyA9IGdsb2JhbCBhcyB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcbiAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XG4gIH07XG5cbiAgaWYgKCFnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSkge1xuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICAgIGdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuICBpZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGNvbm5lY3QgdG8gTW9uZ29EQlwiKTtcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2U7XG59IGVsc2Uge1xuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG59XG5cbi8vIEV4cG9ydCBhIG1vZHVsZS1zY29wZWQgTW9uZ29DbGllbnQgcHJvbWlzZS4gQnkgZG9pbmcgdGhpcyBpbiBhXG4vLyBzZXBhcmF0ZSBtb2R1bGUsIHRoZSBjbGllbnQgY2FuIGJlIHNoYXJlZCBhY3Jvc3MgZnVuY3Rpb25zLlxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwidXJpIiwib3B0aW9ucyIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJnbG9iYWxXaXRoTW9uZ28iLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fearnings%2Froute&page=%2Fapi%2Fearnings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fearnings%2Froute.ts&appDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmayerlyzapaatrodriguez%2FDocuments%2FOlas-joyeria&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();